<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>${title}</title>
    <style type="text/css">
      body {
        font-family: arial, verdana, sans-serif;
        font-size: 14px;
        width: 1024px; 
        margin: auto; 
        margin-top: 20px;
      }
      .clear { clear: both; }
      p { margin: 0px; margin-bottom: 10px;}
      #title { float: left; margin: 10px 0px 20px 0px; }
      #tabs { float: right; margin: 15px 0px; }
      #tabs li { cursor: pointer; margin-right: 0px; margin-left: 5px; display: inline; padding: 5px; border: 1px solid black; }
      #tabs li.focus { background-color: #A00000; color: white; }
      dl dt { margin-top: 10px; font-weight: bold; }
      div.header { border-bottom: 1px solid black; margin: 10px 0px; }
      h2 { float: left; margin: 0px; padding: 0px; }
      ul.links { float: right; margin: 0px; padding: 0px; }
      ul.links li { cursor: pointer; margin: 0px 0px 0px 10px; padding: 0px; padding-top: 5px; display: block; float: right; }
      ul.links li a, ul.links li a:visited { color: black; text-decoration: none; } 
      ul.links li a:hover { color: #A00000; } 
      h3 { margin-bottom: 5px; }
      h4 { margin-bottom: 3px; float: left; margin-top: 0px; }
      table { border-collapse: collapse;  border: 1px solid black; }
      table th { font-size: 12px; }
      table th, table td { padding: 4px; }
      table.terminology { margin-top: 20px; }
      table.terminology th { background: green; color: white; border-bottom: 1px solid black; }
      table.terminology th.term { width: 100px; }
      table.terminology td { border-bottom: 1px dashed black; }
      table.symbols { font-size: 12px; margin-top: 20px; width: 100%; }
      table.symbols th { background: green; color: white; border-bottom: 1px solid black; }
      table.symbols th.name { width: 150px; }
      table.symbols th.symbol { width: 50px; }
      table.symbols th.meaning { width: 250px; }
      table.symbols td { border-bottom: 1px dashed black; }
      table.ruleset { font-size: 12px; }
      table.ruleset th { background: green; color: white; }
      table.ruleset td { border-bottom: 1px dashed black; }
      th.signature, td.signature { width: 300px; }
      th.name, td.name { width: 120px; }
      th.definition, td.definition { width: 580px; }
      table.examples { float: right; font-size: 12px; }
      table.examples th { background: #A00000; color: white; border-bottom: 1px solid black; }
      table.examples th, table.examples td { padding: 4px; }
      table.examples td { border-bottom: 1px dashed black; }
      th.dialect, td.dialect { width: 150px; }
      th.expression, td.expression { width: 350px; }
      th.replacement, td.replacement { width: 350px; }
    </style>
	<script type="text/javascript" language="JavaScript"><!--
	var current = 'intro'
	function show(who) {
		document.getElementById(current).style.display = "none";
		document.getElementById(current + 'focus').className = "unfocus";
		document.getElementById(who).style.display = "block";
		document.getElementById(who + 'focus').className = "focus";
		current = who;
	}
	//--></script>
  </head>
  <body>
    <h1 id="title">WLang specification (version ${version})</h1>
    <ul id="tabs">
      <li id="introfocus" class="focus" onclick="show('intro')">Introduction</li>
      <li id="instantiationfocus" onclick="show('instantiation')">Instantiation</li>
      <li id="rulesetsfocus" onclick="show('rulesets')">Rulesets</li>
      <li id="dialectsfocus" onclick="show('dialects')">Dialects</li>
      <li id="symbolsfocus" onclick="show('symbols')">Tag symbols</li>
    </ul>
    <div class="clear"></div>
    <div id="intro" style="display: block;">
	    <div class="header">
	      <h2>Introduction</h2>
	      <div class="clear"></div>
	    </div>
        <p>^{rdoc/div}{+{what}}</p>
        <table class="terminology">
	      <tr>
		    <th class="term">term</th>
		    <th class="definition">definition</th>
		    <th class="example">example</th>
		  </tr>
        *{terminology as t}{
	      <tr>
	      	<td><em>${t/term}</em></td>
	        <td>^{rdoc/nop}{+{t/definition}}</td>
	        <td style="font-size: 90%;">^{rdoc/nop}{+{t/example}}</td>
	      </tr>
        }
		</table>
    </div>
    <div id="instantiation" style="display: none;">
	    <div class="header">
	      <h2>Instantiation</h2>
	      <div class="clear"></div>
	    </div>
	    <p>^{rdoc/div}{+{grammar}}</p>
	</div>
    <div id="rulesets" style="display: none;">
	    <div class="header">
	      <h2>Standard rulesets</h2>
	      <ul class="links">*{rulesets.reverse as ruleset}{<li><a href="#${ruleset/name}">${ruleset/name}</a></li>}</ul>
	      <div class="clear"></div>
	    </div>
	    *{rulesets as ruleset}{
	      <h3 id="${ruleset/name}">${ruleset/name}</h3>
	      <table class="ruleset">
	        <tr>
	          <th class="signature">signature</th>
	          <th class="name">name</th>
	          <th class="definition">definition</th>
	        </tr>
	        *{ruleset/rules as rule}{
	          <tr>
	            <td class="signature"><tt>${rule/signature}</tt></td>
	            <td class="name">+{rule/name}</td>
	            <td class="definition">^{rdoc/nop}{+{rule/definition}}</td>
	          </tr>
	        }
	      </table>
	      
	      ?{ruleset/examples}{
	        <br/>
	        <h4>Examples:</h4>
	        <table class="examples">
	          <tr>
	            <th>dialect</th>
	            <th>wlang expression</th>
	            <th>replacement value</th>
	          </tr>
	          *{ruleset/examples as example}{
	            <tr>
	              <td class="dialect">
	                <tt>${example[0]}</tt>
	              </td>
	              <td class="expression">
	                <tt>${example[1]}</tt>
	              </td>
	              <td class="replacement">
	                <tt>${example[2]}</tt>
	              </td>
	            </tr>
	          }
	        </table>
	        <div style="clear: both;"></div>
	      }
	    }
	</div>
    <div id="dialects" style="display: none;">
	    <div class="header">
	      <h2>Standard dialects</h2>
	      <div class="clear"></div>
	    </div>
    </div>
    <div id="symbols" style="display: none;">
	    <div class="header">
	      <h2>Tag symbols</h2>
	      <div class="clear"></div>
	    </div>
        <table class="symbols">
	      <tr>
		    <th class="name">name</th>
		    <th class="symbol">symbol</th>
		    <th class="meaning">meaning</th>
		    <th class="remark">remark</th>
		  </tr>
        *{symbols as s}{
	      <tr>
	      	<td><em>${s/name}</em></td>
	      	<td>${s/symbol}</td>
	      	<td>${s/meaning}</td>
	      	<td>${s/remark}</td>
	      </tr>
        }
		</table>
    </div>
  </body>
</html>
